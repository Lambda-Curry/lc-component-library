@use "sass:map";

$default-button-height: 48px;
$default-button-text-color: theme('colors.gray.dark');
$default-button-text-color-darker: theme('colors.gray.darker');

$default-button-bg-color: theme('colors.gray.lighter');
$default-button-bg-color-darker: theme('colors.gray.light');
$default-button-font-size: 14px;
$default-button-border-radius: 6px;
$default-button-font-weight: bold;
$default-button-padding: 14px 20px;

$primary-button-bg-color: theme('colors.primary.default');
$primary-button-bg-color-dark: theme('colors.primary.dark');
$primary-button-text-color: theme('colors.primary.text');
$accent-button-bg-color: theme('colors.accent.default');
$accent-button-bg-color-dark: theme('colors.accent.dark');
$accent-button-text-color: theme('colors.accent.text');
$success-button-bg-color: theme('colors.success.default');
$success-button-bg-color-dark: theme('colors.success.dark');
$success-button-text-color: theme('colors.success.text');
$warn-button-bg-color: theme('colors.warn.default');
$warn-button-bg-color-dark: theme('colors.warn.dark');
$warn-button-text-color: theme('colors.warn.text');
$danger-button-bg-color: theme('colors.danger.default');
$danger-button-bg-color-dark: theme('colors.danger.dark');
$danger-button-text-color: theme('colors.danger.text');
$outline-button-bg-color: transparent;
$outline-button-bg-color-dark: theme('colors.gray.lighter');
$outline-button-text-color: $default-button-text-color;
$outline-button-border-color: theme('colors.gray.lighter');
$outline-button-border-color-darker: theme('colors.gray.light');

$button-types: 'primary', 'accent', 'success', 'warn', 'danger', 'outline';
$button-bg-colors: (
  'primary': $primary-button-bg-color,
  'accent': $accent-button-bg-color,
  'success': $success-button-bg-color,
  'warn': $warn-button-bg-color,
  'danger': $danger-button-bg-color,
  'outline': $outline-button-bg-color
);
$button-bg-colors-dark: (
  'primary': $primary-button-bg-color-dark,
  'accent': $accent-button-bg-color-dark,
  'success': $success-button-bg-color-dark,
  'warn': $warn-button-bg-color-dark,
  'danger': $danger-button-bg-color-dark,
  'outline': $outline-button-bg-color-dark
);
$button-text-colors: (
  'primary': $primary-button-text-color,
  'accent': $accent-button-text-color,
  'success': $success-button-text-color,
  'warn': $warn-button-text-color,
  'danger': $danger-button-text-color,
  'outline': $outline-button-text-color
);

.button {
  zoom: unset;
  display: inline-block;
  text-decoration: none;
  cursor: pointer;
  text-align: center;

  // Note: Currently setting to 1, but will need to be updated to a new strategy if we ever need buttons where the text
  // can run long and have ellipses (...)
  line-height: 1;

  min-height: $default-button-height;
  color: $default-button-text-color;
  background-color: $default-button-bg-color;
  font-size: $default-button-font-size;
  font-weight: $default-button-font-weight;
  border-radius: $default-button-border-radius;
  border: 1px solid $default-button-bg-color;
  padding: $default-button-padding;

  // Default Button Hover State
  &:hover:not([disabled]) {
    background-color: $default-button-bg-color-darker;
    color: $default-button-text-color-darker;
    border-color: $default-button-bg-color-darker;
    box-shadow: none !important;
  }

  &:active:not([disabled]) {
    transform: scale(0.98);
    color: $default-button-text-color-darker;
    border-color: $default-button-bg-color-darker;
  }

  &[disabled] {
    cursor: not-allowed;
    opacity: 0.6;
  }

  &:focus {
    outline: none;
    box-shadow: 0 0 0 2px #ffffff, 0 0 2px 3px $default-button-text-color;
    border-color: $default-button-bg-color;
    background-color: $default-button-bg-color;
    color: $default-button-text-color;
  }

  @each $button-type in $button-types {
    $background-color: map-get($button-bg-colors, $button-type);

    &-#{$button-type} {
      color: map-get($button-text-colors, $button-type);
      background-color: $background-color;
      border-color: $background-color;

      &:hover:not([disabled]) {
        background-color: map-get($button-bg-colors-dark, $button-type);
        color: map-get($button-text-colors, $button-type);
        border-color: map-get($button-bg-colors-dark, $button-type);
      }

      &:focus {
        outline: none;
        box-shadow: 0 0 0 2px #ffffff, 0 0 2px 3px $background-color;
        border-color: $background-color;
        background-color: $background-color;
        color: map-get($button-text-colors, $button-type);
      }

      &:active {
        background-color: map-get($button-bg-colors-dark, $button-type);
        color: map-get($button-text-colors, $button-type);
        border-color: map-get($button-bg-colors-dark, $button-type);
      }

      @if $button-type == outline {
        border-color: $outline-button-border-color;

        &:hover:not([disabled]) {
          background-color: $outline-button-bg-color-dark;
          color: $default-button-text-color-darker;
          border-color: $outline-button-border-color-darker;
        }

        &:focus {
          outline: none;
          box-shadow: 0 0 0 2px #ffffff, 0 0 2px 3px $default-button-text-color;
          background-color: $outline-button-bg-color-dark;
          color: $default-button-text-color;
        }

        &:active {
          background-color: $outline-button-bg-color-dark;
          color: map-get($button-text-colors, $button-type);
          border-color: map-get($button-bg-colors-dark, $button-type);
        }
      }
    }

    &-outline-#{$button-type} {
      background-color: transparent;
      border-color: $background-color;
      color: $background-color;

      &:hover:not([disabled]) {
        background-color: $background-color;
        color: map-get($button-text-colors, $button-type);
        border-color: map-get($button-bg-colors-dark, $button-type);
      }

      &:focus {
        outline: none;
        box-shadow: 0 0 0 2px #ffffff, 0 0 2px 3px $background-color;
        border-color: $background-color;
        background-color: $background-color;
        color: map-get($button-text-colors, $button-type);
      }

      &:active {
        background-color: map-get($button-bg-colors-dark, $button-type);
        color: map-get($button-text-colors, $button-type);
        border-color: map-get($button-bg-colors-dark, $button-type);
      }
    }
  }
}

// Styles taken from example: https://stackoverflow.com/questions/2460100/remove-the-complete-styling-of-an-html-button-submit/2462067
.button-unstyled {
  background: none;
  color: inherit;
  border: none;
  padding: 0;
  font: inherit;
  cursor: pointer;
  height: unset;
  min-height: unset;

  &:hover:not([disabled]) {
    background-color: transparent;
    color: inherit;
    border-color: transparent;
  }

  &:focus {
    outline: 1px dotted #212121;
    outline: 5px auto -webkit-focus-ring-color;
    outline: 5px auto theme('colors.primary.default');
    box-shadow: none;
    background-color: transparent;
    color: inherit;
  }

  &:active:not([disabled]) {
    transform: scale(0.98);
    color: inherit;
    border-color: transparent;
    box-shadow: none !important;
    background-color: transparent;
  }
}

.button-disabled {
  cursor: not-allowed;
  opacity: 0.6;

  &:active {
    transform: scale(1);
  }
}

.button-link {
  padding: 0;
  height: auto;
  line-height: inherit;
  min-height: 0;
  color: var(--blue);

  &:hover:not([disabled]),
  &:focus {
    color: var(--dark-blue);
  }
}
